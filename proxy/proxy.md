### 代理模式

代理通常就是一个介于寻求方和提供方之间的中介系统。寻求方是发出请求的一方，而提供方则是根据请求提供资源的一方。在web的世界中，它相当于代理服务器，客户端向网站发出请求时，首先连接到代理服务器，然后向它请求诸如网页之类的资源。代理服务器在内部评估此请求，将其发送到适当的服务器，当它收到网页后，就会将响应传递给客户端。因此，代理服务器可以封装请求，保护隐私，并且非常适合在分布式架构中运行。

代理模式的主要目的就是为其他对象提供一个代理者或占位符，从而控制对实际对象的访问。

代理模式可以用于一下场景：

* 它能够以更简单的方式表示一个复杂的系统。例如，涉及多个复杂计算或过程的系统应该提供一个更简单的接口，让它充当客户端的代理。
* 它提高了现有的实际对象的安全性。在许多情况下，都不允许客户端直接访问实际对象。这是因为实际对象可能收到恶意活动的危害。这时候，代理就能起到抵御恶意活动的盾牌作用，从而保护了实际的对象。
* 它为不同服务器上的远程对象提供本地接口。一个明显的例子就是客户端希望在远程系统上运行某些命令的分布式系统，但客户端可能没有直接的权限来实现这一点。因此它将请求转交给本地对象（代理），然后由远程机器上的代理执行该请求。
* 它为小号大量内存的对象提供了一个轻量级的句柄。有时，你可能不想加载主要对象，除非他们真的有必要。这是因为实际对象真的很笨重，可能需要消耗大量资源。一个典型的例子就是网站用户的个人简介头像。你最好在列表视图中显示简介头像的缩略图，当然，为了展示用户的详细信息，你就需要加载实际图片了。

代理模式各部分组成

* 代理：它维护一个引用，允许代理通过这个运用来访问实际对象。它提供了一个与主题相同的接口，一遍代理可以替换真实的主题。代理还负责创建和删除真实主题
* 主题：它定义了真实主题和主题的公共接口。以代理和真实主题的形式实现主题，使用主题的任何地方都可以使用代理
* 真实主题：它定义代理所代表的真实对象

### 代理分类

虚拟代理

如果一个对象实例化后会占用大量内存的话，就可以先利用占位符来表示，这就是所谓的虚拟代理

远程代理

它给位于远程服务器或不同地址空间上的实际对象提供了一个本地表示，加入你为应用程序建立一个监控系统，而该应用涉及多个wen服务器、数据库服务器、celery任务管理器、缓存服务器，等等。如果我们要见识这些服务器的cpu和磁盘利用率，就需要建立一个对象，该对象能够用于监视应用程序运行的上下文中，同时还可以执行远程命令以获取实际的参数值。在这种情况下，建立一个作为远程对象的本地表示的远程代理对象可以帮助我们实现这个目标

保护代理

这种代理能够控制真实主题的敏感对象的访问

只能代理

在访问对象时插入其他操作